{% extends 'web/base.html' %}

{% block title %}Výsledky hledání{% endblock %}

{% block content %}
<h1 class="page-title">Výsledky hledání '<i>{{ query|default:'' }}</i>'</h1>
<div>
    <form method="get" action="{% url 'search' %}">
        <input type="search" class="form-control" name="q" placeholder="Vyhledávání" value="{{ query|default:'' }}"/>
    </form>
</div>
{% if authors|length > 0 %}
    <h2>Nalezení autoři 
        {% if authors|length <= max_results %}
            ({{ authors|length}})
        {% else %}
            ({{ max_results}} z {{ authors|length}} výsledků)
        {% endif %}
    </h2>
    <ol>
    {% for a in authors %}
        {% if forloop.counter <= max_results %}
            {% if a.pseudonym_for %}
                <li><a href="{% url 'author_detail' id=a.pseudonym_for.id %}">{{ a }}</a></li>
            {% else %}
                <li><a href="{% url 'author_detail' id=a.id %}">{{ a }}</a></li>
            {% endif %}
        {% endif %}
    {% endfor %}
    </ol>
{% endif %}
{% if poems|length > 0 %}
    <h2>Nalezené básně
        {% if poems|length <= max_results %}
            ({{ poems|length}})
        {% else %}
            (prvních {{ max_results}} výsledků)
        {% endif %}
    </h2>
    <ol>
    {% for p in poems %}
        {% if forloop.counter <= max_results %}
            <li><a href="{% url 'poem_text' id=p.id %}">{{ p|safe }}</a></li>
        {% endif %}
    {% endfor %}
    </ol>
{% endif %}
{% if books|length > 0 %}
    <h2>Nalezené knihy
        {% if books|length <= max_results %}
            ({{ books|length}})
        {% else %}
            (prvních {{ max_results}} výsledků)
        {% endif %}
    </h2>
    <ol>
    {% for b in books %}
        {% if forloop.counter <= max_results %}
            <li><a href="{% url 'book_detail' id=b.id %}">{{ b|striptags|safe }}</a></li>
        {% endif %}
    {% endfor %}
    </ol>
{% endif %}
{% endblock %}